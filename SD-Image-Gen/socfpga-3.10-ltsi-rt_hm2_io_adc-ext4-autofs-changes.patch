From 85963c1a22e305b58b5f3c298faecf765a6b9533 Mon Sep 17 00:00:00 2001
From: the-snowwhite <producer@holotronic.dk>
Date: Tue, 1 Mar 2016 21:21:34 +0100
Subject: [PATCH 1/4] add uio kernel module

Signed-off-by: the-snowwhite <producer@holotronic.dk>
---
 arch/arm/configs/socfpga_defconfig | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/arch/arm/configs/socfpga_defconfig b/arch/arm/configs/socfpga_defconfig
index f7e1631..4ab2f7f 100644
--- a/arch/arm/configs/socfpga_defconfig
+++ b/arch/arm/configs/socfpga_defconfig
@@ -192,3 +192,6 @@ CONFIG_PREEMPT_RT=y
 CONFIG_PREEMPT_RT_FULL=y
 CONFIG_MARVELL_PHY=y
 CONFIG_FHANDLE=y
+CONFIG_UIO=y
+CONFIG_UIO_PDRV=y
+CONFIG_UIO_PDRV_GENIRQ=y
-- 
2.7.0


From 933573fba4a2a5b8057765b487289a05e9d4831f Mon Sep 17 00:00:00 2001
From: the-snowwhite <producer@holotronic.dk>
Date: Tue, 1 Mar 2016 21:36:19 +0100
Subject: [PATCH 2/4] add hm2reg_io and adc_ltc2308_fifo dts enteties

Signed-off-by: the-snowwhite <producer@holotronic.dk>
---
 arch/arm/boot/dts/socfpga.dtsi | 21 +++++++++++++++++++++
 1 file changed, 21 insertions(+)

diff --git a/arch/arm/boot/dts/socfpga.dtsi b/arch/arm/boot/dts/socfpga.dtsi
index 4fc29ef..77ec7f7 100644
--- a/arch/arm/boot/dts/socfpga.dtsi
+++ b/arch/arm/boot/dts/socfpga.dtsi
@@ -947,5 +947,26 @@
 			clocks = <&per_base_clk>;
 			status = "disabled";
 		};
+            
+		hm2reg_io_0: hm2-socfpga@0xff240000 {
+			compatible = "machkt,hm2reg-io-1.0";
+			reg = <0xff240000 0x00010000>;
+/*			interrupts = <0 172 4>;*/
+			clocks = <&osc1>;
+			address_width = <14>;
+			data_width = <32>;
+         status = "enabled";
+		};
+
+		adc_ltc2308_fifo_0: ltc2308-adc@0xff250000 {
+			compatible = "machkt,adc-ltc2308-1.1";
+			reg = <0xff250000 0x00000008>;
+/*			interrupts = <0 172 4>;*/
+			clocks = <&osc1 &h2f_usr1_clk>;
+			clock-names = "clock_sink", "clock_sink_adc";
+			address_width = <3>;
+			data_width = <32>;
+			status = "disabled";
+		};
 	};
 };
-- 
2.7.0


From 906e93fba9122275e59706c1cd38a37c22dda0c2 Mon Sep 17 00:00:00 2001
From: the-snowwhite <producer@holotronic.dk>
Date: Thu, 17 Mar 2016 16:05:02 +0100
Subject: [PATCH 3/4] added CONFIG_LBDAF=y to config for fixing ext4 rootfs
 boot

Signed-off-by: the-snowwhite <producer@holotronic.dk>
---
 arch/arm/configs/socfpga_defconfig | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/arch/arm/configs/socfpga_defconfig b/arch/arm/configs/socfpga_defconfig
index 4ab2f7f..a1703c7 100644
--- a/arch/arm/configs/socfpga_defconfig
+++ b/arch/arm/configs/socfpga_defconfig
@@ -12,7 +12,7 @@ CONFIG_OPROFILE=y
 CONFIG_MODULES=y
 CONFIG_MODULE_UNLOAD=y
 CONFIG_HOTPLUG=y
-# CONFIG_LBDAF is not set
+CONFIG_LBDAF=y
 # CONFIG_BLK_DEV_BSG is not set
 # CONFIG_IOSCHED_DEADLINE is not set
 # CONFIG_IOSCHED_CFQ is not set
-- 
2.7.0


From 580d09a3caea7f3705a236c5e74d100c0c1cd30b Mon Sep 17 00:00:00 2001
From: the-snowwhite <producer@holotronic.dk>
Date: Tue, 22 Mar 2016 13:29:24 +0100
Subject: [PATCH 4/4] add autofs module

---
 arch/arm/configs/socfpga_defconfig | 1 +
 1 file changed, 1 insertion(+)

diff --git a/arch/arm/configs/socfpga_defconfig b/arch/arm/configs/socfpga_defconfig
index a1703c7..4aac25c 100644
--- a/arch/arm/configs/socfpga_defconfig
+++ b/arch/arm/configs/socfpga_defconfig
@@ -104,6 +104,7 @@ CONFIG_SPI_DW_MMIO=y
 CONFIG_SPI_SPIDEV=y
 CONFIG_GPIOLIB=y
 CONFIG_GPIO_SYSFS=y
+CONFIG_AUTOFS4_FS=m
 CONFIG_GPIO_DWAPB=y
 CONFIG_GPIO_ALTERA=m
 CONFIG_GPIO_A10SYCON=y
-- 
2.7.0

